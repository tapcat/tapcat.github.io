"use strict";angular.module("tapcatWebApp",["ngRoute"]).config(["$httpProvider","$routeProvider",function(a,b){a.defaults.withCredentials=!0,b.otherwise({redirectTo:"/"})}]),angular.module("tapcatWebApp").service("personaAuthService",["$http",function(a){var b=function(b){a.post("//api.tapcat.net/login","assertion="+b,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){window.location="/user"}).error(function(){navigator.id.logout()})},c=function(){a.post("/logout").then(function(){window.location="/"})};return navigator.id.watch({onlogin:b,onlogout:c}),{login:b,logout:c}}]),angular.module("tapcatWebApp").controller("AuthCtrl",["$scope","$http","personaAuthService",function(a,b){a.needLogin=!0,b.get("//api.tapcat.net/user/").success(function(){a.needLogin=!1}),a.login=function(){navigator.id.request()},a.logout=function(){navigator.id.logout()}}]);